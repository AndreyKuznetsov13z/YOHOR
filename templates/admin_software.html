{% extends "base.html" %}

{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ - YOHOR SHOP{% endblock %}

{% block content %}
<h1>üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ </h1>

<div class="card" style="margin: 20px 0; background: #e8f4f8;">
    <h3>–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä/—É—Å–ª—É–≥—É</h3>
    <form method="POST" action="{{ url_for('add_software_route') }}" style="margin-top: 20px;">
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label for="name">–ù–∞–∑–≤–∞–Ω–∏–µ:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="price">–¶–µ–Ω–∞:</label>
                <input type="number" id="price" name="price" step="0.01" min="0" required>
            </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
            <div class="form-group">
                <label for="developer">–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:</label>
                <input type="text" id="developer" name="developer" required>
            </div>
            <div class="form-group">
                <label for="category_id">–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
                <select id="category_id" name="category_id" required>
                    <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
                    {% for cat in categories %}
                        <option value="{{ cat['id'] }}">{{ cat['name'] }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <div class="form-group">
            <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
            <textarea id="description" name="description" rows="4"></textarea>
        </div>
        
        <div class="form-group">
            <label for="image_url">URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:</label>
            <input type="url" id="image_url" name="image_url">
        </div>
        
        <button type="submit" class="btn btn-success" style="padding: 10px 20px;">–î–æ–±–∞–≤–∏—Ç—å –ü–û</button>
    </form>
</div>

<h2 style="margin: 30px 0 20px 0;">–í—Å–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã</h2>
<div class="card">
    <table>
        <thead>
            <tr>
                <th>ID</th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫</th>
                <th>–¶–µ–Ω–∞</th>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th>–ó–∞–≥—Ä—É–∑–æ–∫</th>
                <th>–†–µ–π—Ç–∏–Ω–≥</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
            </tr>
        </thead>
        <tbody>
            {% for software in software_list %}
                <tr>
                    <td>#{{ software['id'] }}</td>
                    <td>{{ software['name'] }}</td>
                    <td>{{ software['developer'] }}</td>
                    <td>${{ "%.2f"|format(software['price']) }}</td>
                    <td>{{ software['category_name'] }}</td>
                    <td>{{ software['downloads'] }}</td>
                    <td>‚≠ê {{ "%.1f"|format(software['rating_avg']) }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('delete_software_route', software_id=software['id']) }}" style="display: inline;">
                            <button type="submit" class="btn btn-danger" style="padding: 5px 10px;" onclick="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã?')">–£–¥–∞–ª–∏—Ç—å</button>
                        </form>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
